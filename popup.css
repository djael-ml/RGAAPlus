/* Garder les variables :root du code précédent */
:root {
    --white: #ffffff;
    --bg-grey: #F5F5F7;
    --text-dark: #1D1D1F;
    --text-grey: #86868B;
    --accent: #0071E3;
    --danger: #FF3B30;
    --warning: #FF9500;
    --success: #34C759;
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', -apple-system, sans-serif; }

body { width: 360px; height: 620px; background: var(--bg-grey); color: var(--text-dark); }

.main-wrapper { padding: 20px; height: 100%; display: flex; flex-direction: column; }

/* --- Header & Score (Garder pareil) --- */
.glass-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.brand { display: flex; align-items: center; gap: 10px; }
.brand-logo { width: 32px; height: 32px; border-radius: 8px; background: var(--text-dark); color: white; display: grid; place-items: center; font-weight: 700; }
.brand-name { font-weight: 600; font-size: 16px; }
.status-indicator { width: 8px; height: 8px; border-radius: 50%; background: #ccc; }
.status-indicator.ready { background: var(--success); box-shadow: 0 0 8px var(--success); }
.status-indicator.busy { background: var(--warning); animation: pulse 1s infinite; }
@keyframes pulse { 50% { opacity: 0.5; } }

.score-section { text-align: center; margin-bottom: 20px; }
.circular-score { font-size: 48px; font-weight: 800; background: -webkit-linear-gradient(45deg, var(--text-dark), #555); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.score-subtitle { font-size: 11px; font-weight: 600; color: var(--text-grey); text-transform: uppercase; letter-spacing: 0.5px; }

.stats-row { display: flex; gap: 12px; justify-content: center; margin-bottom: 20px; }
.stat-capsule { background: var(--white); padding: 8px 16px; border-radius: 12px; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.02); min-width: 80px; }
.stat-num { font-weight: 700; font-size: 16px; }
.stat-label { font-size: 10px; color: var(--text-grey); }
.stat-capsule.error .stat-num { color: var(--danger); }
.stat-capsule.suggestion .stat-num { color: var(--warning); }

.divider { height: 1px; background: rgba(0,0,0,0.05); margin-bottom: 15px; }

/* --- Results List (Scroll Principal) --- */
.scroll-area { flex: 1; overflow-y: auto; padding-right: 4px; }
.scroll-area::-webkit-scrollbar { width: 4px; }
.scroll-area::-webkit-scrollbar-thumb { background: #d1d1d6; border-radius: 2px; }

.empty-state { text-align: center; padding-top: 50px; color: var(--text-grey); font-size: 13px; }

/* --- Accordéon & Items --- */
.theme-card { background: var(--white); border-radius: 12px; margin-bottom: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.02); overflow: hidden; }
.theme-head { padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
.theme-info { display: flex; align-items: center; gap: 10px; }
.theme-tag { font-size: 10px; font-weight: 700; background: var(--bg-grey); padding: 3px 6px; border-radius: 4px; color: var(--text-grey); }
.theme-text { font-weight: 600; font-size: 12px; }
.theme-toggle { font-size: 10px; color: var(--text-grey); transition: transform 0.2s; }
.theme-card.open .theme-toggle { transform: rotate(180deg); }

/* Scroll à l'intérieur de l'accordéon si trop d'erreurs */
.theme-body { max-height: 0; opacity: 0; transition: all 0.3s ease; background: #fafafa; overflow-y: auto; }
.theme-card.open .theme-body { max-height: 250px; opacity: 1; border-top: 1px solid rgba(0,0,0,0.05); padding: 10px; }
/* Scrollbar interne */
.theme-body::-webkit-scrollbar { width: 3px; }
.theme-body::-webkit-scrollbar-thumb { background: #ccc; border-radius: 2px; }

/* --- Style Compact des Erreurs --- */
.item-row {
    background: var(--white); padding: 8px 10px; border-radius: 8px; margin-bottom: 6px;
    border: 1px solid rgba(0,0,0,0.03); display: flex; flex-direction: column; gap: 4px;
}
.item-header { display: flex; justify-content: space-between; align-items: center; }
.item-badge { font-size: 9px; font-weight: 800; padding: 2px 4px; border-radius: 4px; text-transform: uppercase; }
.badge-err { color: var(--danger); background: rgba(255, 59, 48, 0.1); }
.badge-sugg { color: var(--warning); background: rgba(255, 149, 0, 0.1); }

.item-msg { font-size: 11px; font-weight: 600; color: var(--text-dark); }
.item-fix { font-size: 10px; color: var(--text-grey); font-style: italic; }

.actions { display: flex; gap: 6px; margin-top: 2px; }
.btn-small {
    flex: 1; padding: 5px; border-radius: 6px; border: none; font-size: 10px; font-weight: 600; cursor: pointer; transition: 0.2s;
    text-align: center;
}
.btn-locate { background: var(--bg-grey); color: var(--text-dark); }
.btn-locate:hover { background: #e5e5ea; }
.btn-fix { background: rgba(52, 199, 89, 0.1); color: var(--success); }
.btn-fix:hover { background: rgba(52, 199, 89, 0.2); }
.btn-fix:disabled { opacity: 0.5; cursor: default; }

/* --- Footer --- */
footer { margin-top: auto; padding-top: 15px; }
.action-btn { width: 100%; height: 44px; border-radius: 12px; border: none; background: var(--text-dark); color: var(--white); font-weight: 600; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; justify-content: center; align-items: center; transition: transform 0.1s; }
.action-btn:hover { transform: scale(1.01); }
.github-plug { text-align: center; font-size: 10px; color: var(--text-grey); margin-top: 10px; }
.github-plug a { color: var(--text-dark); text-decoration: none; font-weight: 700; }

.spinner { width: 16px; height: 16px; border: 2px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite; display: none; }
@keyframes spin { to { transform: rotate(360deg); } }
.action-btn.loading .btn-txt { display: none; }
.action-btn.loading .spinner { display: block; }